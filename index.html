<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Focus-Tap | Enfoque M√≥vil & Desktop</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-gradient: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            --glass-bg: rgba(255, 255, 255, 0.35);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-color: #2d3436;
            --accent-color: #6c5ce7;
            --success-color: #00b894;
            --danger-color: #ff7675;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }

        body {
            background: var(--bg-gradient);
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-color);
            padding: 20px;
        }

        /* CONTENEDOR FLEXIBLE */
        .main-wrapper {
            display: flex;
            flex-direction: row;
            gap: 25px;
            width: 100%;
            max-width: 1200px;
            justify-content: center;
        }

        .content-grid {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .top-row {
            display: grid;
            grid-template-columns: 1.2fr 1fr;
            gap: 20px;
        }

        /* ESTILO GLASSMORPHISM */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        /* PUBLICIDAD RECEPTIVA */
        .ad-sidebar {
            width: 300px;
            height: 600px;
            background: rgba(255,255,255,0.15);
            border: 2px dashed rgba(255,255,255,0.3);
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(0,0,0,0.3);
            font-size: 0.8rem;
            position: sticky;
            top: 20px;
        }

        .ad-bottom {
            width: 100%;
            height: 100px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(0,0,0,0.2);
            font-size: 0.7rem;
            border: 1px dashed rgba(0,0,0,0.1);
        }

        /* TIMER */
        .timer-section { text-align: center; }
        .timer-display { font-size: clamp(60px, 15vw, 100px); font-weight: 600; letter-spacing: -4px; margin: 10px 0; }
        .config-time input { 
            background: rgba(255,255,255,0.4); border: none; padding: 8px; border-radius: 10px; 
            width: 60px; text-align: center; font-size: 1rem;
        }

        /* SONIDOS */
        .sound-row {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 20px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .vol-slider { flex: 1; accent-color: var(--accent-color); cursor: pointer; height: 6px; }

        /* NOTAS */
        .notes-section { position: relative; }
        #brain-dump {
            width: 100%; height: 120px; background: rgba(255,255,255,0.1);
            border: 1px dashed rgba(0,0,0,0.1); border-radius: 20px; padding: 15px;
            margin-top: 10px; resize: none; outline: none; font-size: 1rem;
        }
        .copy-btn { position: absolute; top: 20px; right: 20px; background: var(--accent-color); color: white; padding: 6px 15px; border-radius: 12px; font-size: 0.75rem; border: none; cursor: pointer; }

        /* BOTONES */
        button { border: none; cursor: pointer; font-weight: 600; transition: 0.2s; border-radius: 15px; }
        .btn-main { background: var(--accent-color); color: white; padding: 15px 30px; font-size: 1rem; width: 100%; max-width: 200px; }
        .btn-reset { background: rgba(0,0,0,0.05); padding: 15px 20px; }
        .extreme-btn { background: var(--danger-color); color: white; width: 100%; margin-top: 20px; padding: 15px; font-size: 0.9rem; }

        .streak-badge { margin-bottom: 20px; background: white; padding: 8px 20px; border-radius: 50px; font-weight: bold; align-self: flex-start; }

        /* MEDIA QUERIES PARA M√ìVIL */
        @media (max-width: 850px) {
            .main-wrapper { flex-direction: column; }
            .top-row { grid-template-columns: 1fr; }
            .ad-sidebar { display: none; } /* En m√≥vil no cabe el lateral */
            .timer-display { font-size: 80px; }
            body { padding: 15px; }
            .glass-card { padding: 20px; }
        }
    </style>
</head>
<body id="body">

    <div class="streak-badge">üî• Racha: <span id="stk">0</span></div>

    <div class="main-wrapper">
        <div class="content-grid">
            
            <div class="top-row">
                <div class="glass-card timer-section">
                    <div class="config-time">
                        <label>Minutos: </label>
                        <input type="number" id="min-in" value="25">
                    </div>
                    <div class="timer-display" id="clock">25:00</div>
                    <div style="display: flex; justify-content: center; gap: 10px;">
                        <button class="btn-main" id="start">Empezar</button>
                        <button class="btn-reset" id="reset">Reset</button>
                    </div>
                    <button class="extreme-btn" id="ext-btn">MODO EXTREMO</button>
                    <p id="quote" style="margin-top:15px; font-size:0.8rem; font-style:italic; opacity:0.6;">"C√©ntrate en el proceso."</p>
                </div>

                <div class="glass-card">
                    <h3 style="margin-bottom:15px">Ambiente</h3>
                    <div class="sound-row">
                        <span>üåßÔ∏è</span>
                        <button class="btn-reset" onclick="audio('rain')" style="padding:8px 12px">Play/Pausa</button>
                        <input type="range" class="vol-slider" id="v-rain" min="0" max="1" step="0.1" value="0.5" oninput="setV('rain')">
                    </div>
                    <div class="sound-row">
                        <span>üå≤</span>
                        <button class="btn-reset" onclick="audio('forest')" style="padding:8px 12px">Play/Pausa</button>
                        <input type="range" class="vol-slider" id="v-forest" min="0" max="1" step="0.1" value="0.5" oninput="setV('forest')">
                    </div>
                </div>
            </div>

            <div class="glass-card notes-section">
                <button class="copy-btn" id="copy" onclick="copy()">Copiar</button>
                <h3>Brain Dump</h3>
                <textarea id="notes" placeholder="Escribe aqu√≠ tus ideas..."></textarea>
            </div>

            <div class="ad-bottom">PUBLICIDAD (Banner 728x90 / 320x50)</div>

        </div>

        <div class="ad-sidebar">ANUNCIO LATERAL (300x600)</div>
    </div>

    <audio id="a-rain" loop src=""></audio>
    <audio id="a-forest" loop src=""></audio>

    <script>
        let t = null, left = 25*60, ext = false;
        const clk = document.getElementById('clock'), st = document.getElementById('start');
        
        // Timer
        document.getElementById('min-in').onchange = (e) => { if(!t){ left = e.target.value*60; upd(); }};
        function upd() { 
            let m=Math.floor(left/60), s=left%60; 
            clk.innerText = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`; 
        }

        st.onclick = () => {
            if(t) { clearInterval(t); t=null; st.innerText="Reanudar"; }
            else {
                st.innerText="Pausar";
                t = setInterval(() => { 
                    left--; upd(); 
                    if(left<=0){ clearInterval(t); alert("¬°Terminado!"); stk(); }
                }, 1000);
            }
        };

        document.getElementById('reset').onclick = () => {
            clearInterval(t); t=null; left=document.getElementById('min-in').value*60; upd(); st.innerText="Empezar";
        };

        // Audio
        function audio(id) {
            const a = document.getElementById('a-'+id);
            a.volume = document.getElementById('v-'+id).value;
            a.paused ? a.play() : a.pause();
        }
        function setV(id) { document.getElementById('a-'+id).volume = document.getElementById('v-'+id).value; }

        // Notas
        function copy() {
            const n = document.getElementById('notes'), b = document.getElementById('copy');
            n.select(); document.execCommand('copy');
            b.innerText = "¬°Copiado! ‚úÖ"; b.style.background = "var(--success-color)";
            setTimeout(() => { b.innerText="Copiar"; b.style.background="var(--accent-color)"; }, 2000);
        }

        // Penalizaci√≥n
        document.addEventListener("visibilitychange", () => {
            if(document.hidden && t) {
                left = Math.max(0, left - 10); upd();
                document.getElementById('body').style.background = "rgba(255,0,0,0.15)";
                setTimeout(() => document.getElementById('body').style.background = "var(--bg-gradient)", 800);
            }
        });

        // Racha
        function stk() {
            let s = parseInt(localStorage.getItem('f_stk') || 0) + 1;
            localStorage.setItem('f_stk', s); document.getElementById('stk').innerText = s;
        }
        document.getElementById('stk').innerText = localStorage.getItem('f_stk') || 0;

        // Modo Extremo
        document.getElementById('ext-btn').onclick = () => {
            if(confirm("¬øActivar Modo Extremo? No podr√°s salir sin penalizar.") && confirm("¬øSeguro?")) {
                ext = true; document.documentElement.requestFullscreen();
            }
        };
    </script>
</body>
</html>
